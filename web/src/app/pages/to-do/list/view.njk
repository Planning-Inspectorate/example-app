{% extends "layouts/main.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../_components/priority-tag.njk" import priorityTag %}



{% block pageContent %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">

            {% set tableHead = [
                {
                    text: "Task"
                },
                {
                    text: "Priority"
                },
                {
                    text: "Deadline"
                },
                {
                    text: "Action"
                }
            ]%}

            {% set tableRows = [] %}

            {% for todo in todoList %}
                {% set tableRows = (tableRows.push([
                    {
                        text: todo.title
                    },
                    {
                        text: priorityTag(todo.priority)
                    },
                    {
                        text: todo.completeBy
                    },
                    {
                        html: "<a class='govuk-link' href=" + todo.todoUrl + ">View</a>"
                    }
                ]), tableRows) %}
            {% endfor %}

            {{ govukButton({
                text: "Add new task",
                href: "task-name"
            }) }}


            {{ govukTable({
                head: tableHead,
                rows: tableRows
            }) }}
        </div>
    </div>


{% endblock %}